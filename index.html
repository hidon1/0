<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×¤×•×¨×•× ×”×¦×œ×™××§ ×”×—×¨×“×™ - ×”××”×“×•×¨×” ×”××•×¨×—×‘×ª</title>
    <link href="https://fonts.googleapis.com/css2?family=Assistant:wght@300;400;700&family=Heebo:wght@800&display=swap" rel="stylesheet">
    <style>
        :root { 
            --primary: #2c3e50; --accent: #d4af37; --bg: #fdfdfd; --card: #ffffff; --text: #333; --info: #e8f4fd;
        }
        [data-theme="dark"] {
            --primary: #1a1a1a; --bg: #121212; --card: #1e1e1e; --text: #e0e0e0; --info: #2c3e50;
        }

        body { 
            font-family: 'Assistant', sans-serif; background: var(--bg); color: var(--text); 
            margin: 0; transition: all 0.3s ease; padding-bottom: 100px;
        }

        header { 
            background: var(--primary); color: white; padding: 3rem 1rem; text-align: center;
            border-bottom: 5px solid var(--accent); position: relative;
        }

        .theme-toggle {
            position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.1); 
            border: 1px solid white; color: white; padding: 8px 15px; cursor: pointer; border-radius: 20px;
        }

        .container { max-width: 1000px; margin: auto; padding: 20px; }

        /* ×§×˜×’×•×¨×™×•×ª */
        .nav-tabs { 
            display: flex; gap: 12px; overflow-x: auto; padding: 20px 0; 
            position: sticky; top: 0; background: var(--bg); z-index: 10;
        }
        .tab-btn { 
            background: var(--card); border: 2px solid var(--primary); padding: 10px 25px;
            border-radius: 30px; cursor: pointer; font-weight: bold; color: var(--primary);
            transition: 0.3s; white-space: nowrap; font-size: 1rem;
        }
        .tab-btn.active { background: var(--primary); color: white; }

        /* ××™×“×¢ ×•××ª×›×•× ×™× */
        .info-section {
            background: var(--info); padding: 25px; border-radius: 15px; margin-bottom: 30px;
            border-right: 6px solid var(--accent); display: none; animation: fadeIn 0.5s;
        }

        /* ×›×¨×˜×™×¡×™×•×ª ×”×•×“×¢×•×ª */
        .thread-card { 
            background: var(--card); border-radius: 15px; padding: 25px; margin-bottom: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.05); border-right: 8px solid var(--accent);
            animation: slideUp 0.5s ease-out; transition: 0.3s;
        }
        .thread-card:hover { transform: translateY(-5px); box-shadow: 0 15px 35px rgba(0,0,0,0.1); }

        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .like-btn { 
            background: #fff0f0; border: none; color: #e74c3c; padding: 8px 20px; 
            border-radius: 12px; cursor: pointer; font-weight: bold; transition: 0.2s;
        }
        .like-btn:hover { background: #ffe0e0; transform: scale(1.05); }

        .fab { 
            position: fixed; bottom: 35px; right: 35px; width: 75px; height: 75px;
            border-radius: 50%; background: var(--accent); color: white;
            font-size: 35px; border: none; cursor: pointer; box-shadow: 0 8px 25px rgba(0,0,0,0.3); z-index: 100;
        }

        .recipe-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 15px; }
        .recipe-item { background: rgba(255,255,255,0.5); padding: 15px; border-radius: 10px; border: 1px solid #ddd; }
    </style>
</head>
<body data-theme="light">

<header>
    <button class="theme-toggle" onclick="toggleTheme()">â˜€ï¸/ğŸŒ™ ××¦×‘ ×ª×¦×•×’×”</button>
    <h1 style="font-family: 'Heebo', sans-serif; font-size: 2.8rem; margin:0;">×¤×•×¨×•× ×”×¦×œ×™××§ ×”×—×¨×“×™</h1>
    <p>×‘×™×ª ×—× ×œ×§×”×™×œ×” - ×›×©×¨×•×ª, ××ª×›×•× ×™× ×•×¢×–×¨×” ×”×“×“×™×ª</p>
</header>

<div class="container">
    <div class="nav-tabs">
        <button class="tab-btn active" onclick="changeCategory('×”×›×œ', this)">ğŸ  ×”×›×œ</button>
        <button class="tab-btn" onclick="changeCategory('××™×“×¢', this)">ğŸ“œ ××™×“×¢ ×›×œ×œ×™</button>
        <button class="tab-btn" onclick="changeCategory('××ª×›×•× ×™×', this)">ğŸ° ××ª×›×•× ×™ ×”×‘×™×ª</button>
        <button class="tab-btn" onclick="changeCategory('×›×©×¨×•×ª', this)">ğŸ—ï¸ ×›×©×¨×•×ª</button>
    </div>

    <div id="section-××™×“×¢" class="info-section">
        <h2>ğŸ“œ ××” ×–×” ×¦×œ×™××§? (××™×“×¢ ×œ×§×”×™×œ×”)</h2>
        <p>×¦×œ×™××§ ×”×™× ×¨×’×™×©×•×ª ×œ×—×œ×‘×•×Ÿ ×”×’×œ×•×˜×Ÿ. ×‘××™×©×•×¨ ×”×”×œ×›×ª×™, ×§×™×™××•×ª ×©××œ×•×ª ×¨×‘×•×ª ×‘× ×•×©× ×”×¤×¨×©×ª ×—×œ×” ××§××—×™× ×œ×œ× ×’×œ×•×˜×Ÿ (×›××• ×§××— ×©×™×‘×•×œ×ª ×©×•×¢×œ ×œ×œ× ×’×œ×•×˜×Ÿ) ×•×‘×¨×›×•×ª ×”× ×”× ×™×Ÿ. ××•××œ×¥ ×œ×”×ª×™×™×¢×¥ ×¢× ×¨×‘ ×‘× ×•×©× ×‘×¨×›×ª "×©×”×›×œ" ××• "××•×¦×™×".</p>
    </div>

    <div id="section-××ª×›×•× ×™×" class="info-section">
        <h2>ğŸ° ××ª×›×•× ×™ ×”×‘×™×ª ×”××•×‘×—×¨×™×</h2>
        <div class="recipe-grid">
            <div class="recipe-item">
                <strong>ğŸ ×—×œ×•×ª ×©×‘×ª ×œ×œ× ×’×œ×•×˜×Ÿ</strong>
                <p>×©×™×œ×•×‘ ×©×œ ×§××— ×¨×‘-×ª×›×œ×™×ª×™, ×¢××™×œ×Ÿ ×ª×™×¨×¡ ×•×¡×™×‘×™× ×ª×–×•× ×ª×™×™× ×œ×™×¦×™×¨×ª ××¨×§× ××•×•×¨×™×¨×™.</p>
            </div>
            <div class="recipe-item">
                <strong>ğŸ© ×¡×•×¤×’× ×™×•×ª/×¢×•×’×•×ª ×‘×—×•×©×•×ª</strong>
                <p>×©×™××•×© ×‘×¨×¡×§ ×ª×¤×•×—×™× ×œ×”×¢× ×§×ª ×œ×—×•×ª ×‘××§×•× ×’×œ×•×˜×Ÿ.</p>
            </div>
        </div>
    </div>

    <div id="posts-container">
        <div style="text-align: center; padding: 50px;">×˜×•×¢×Ÿ ×”×•×“×¢×•×ª ××”×¤×•×¨×•×...</div>
    </div>
</div>

<button class="fab" onclick="alert('×¤×ª×™×—×ª ×©×¨×©×•×¨ ×—×“×© ×–××™× ×” ×“×¨×š ×”×˜×•×¤×¡ ×‘××ª×¨')">+</button>

<script>
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzcB4Ur9EiWQCKpdeA3Cdjd_seyapLuQIoHenUcbsqTIArh5yVUrBuKGJADcwT9YPFntg/exec";
    let allPosts = [];

    async function loadData() {
        try {
            const res = await fetch(SCRIPT_URL);
            allPosts = await res.json();
            render('×”×›×œ');
        } catch(e) { console.error("Error loading:", e); }
    }

    function render(category) {
        // ×”×¦×’×ª/×”×¡×ª×¨×ª ×§×˜×¢×™ ××™×“×¢ ×¡×˜×˜×™×™×
        document.querySelectorAll('.info-section').forEach(s => s.style.display = 'none');
        const infoSection = document.getElementById('section-' + category);
        if(infoSection) infoSection.style.display = 'block';

        const container = document.getElementById('posts-container');
        container.innerHTML = '';
        
        const filtered = category === '×”×›×œ' ? allPosts : allPosts.filter(p => p.Category === category);
        
        filtered.filter(p => p.ID).forEach(t => {
            container.innerHTML += `
                <div class="thread-card">
                    <div style="display:flex; justify-content:space-between; font-size:0.9rem; color:#888;">
                        <span>${t.Category}</span>
                        <span>${new Date(t.Timestamp).toLocaleDateString('he-IL')}</span>
                    </div>
                    <h2 style="margin:10px 0; color:var(--primary);">${t.Subject}</h2>
                    <p style="font-size:1.1rem; line-height:1.6;">${t.Content}</p>
                    <div style="display:flex; justify-content:space-between; align-items:center; margin-top:15px;">
                        <span>×××ª: <strong>${t.Name}</strong></span>
                        <button class="like-btn" onclick="addLike('${t.ID}')">â¤ï¸ ${t.Likes || 0}</button>
                    </div>
                </div>
            `;
        });
    }

    async function addLike(id) {
        await fetch(SCRIPT_URL, { method: 'POST', body: JSON.stringify({action: "like", id: id}) });
        loadData(); // ×¨×™×¢× ×•×Ÿ × ×ª×•× ×™×
    }

    function changeCategory(cat, btn) {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        render(cat);
    }

    function toggleTheme() {
        const body = document.body;
        const current = body.getAttribute('data-theme');
        body.setAttribute('data-theme', current === 'dark' ? 'light' : 'dark');
    }

    loadData();
</script>
</body>
</html>
